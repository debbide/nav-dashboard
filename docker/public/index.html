<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>导航站</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="stylesheet" href="/css/style.css?v=12">
</head>

<body>
  <!-- 暗色模式切换 -->
  <button id="themeToggle" class="theme-toggle" title="切换主题">🌙</button>

  <!-- 密码验证弹窗 -->
  <div id="passwordModal" class="password-modal" style="display: none;">
    <div class="password-modal-content glass-effect">
      <h3>🔐 解锁编辑模式</h3>
      <p>输入管理密码以启用拖拽排序</p>
      <input type="password" id="editPassword" placeholder="请输入密码" autocomplete="off">
      <div class="password-modal-btns">
        <button id="passwordCancelBtn" class="btn-secondary">取消</button>
        <button id="passwordConfirmBtn" class="btn-primary">确认</button>
      </div>
      <div id="passwordError" class="password-error"></div>
    </div>
  </div>

  <div class="container">

    <!-- 快速添加弹窗 -->
    <div id="quickAddModal" class="password-modal" style="display: none;">
      <div class="password-modal-content glass-effect quick-add-modal">
        <h3>➕ 快速添加网站</h3>
        <input type="text" id="quickAddName" placeholder="网站名称" autocomplete="off">
        <input type="url" id="quickAddUrl" placeholder="https://..." autocomplete="off">
        <div class="quick-add-logo-row">
          <input type="text" id="quickAddLogo" placeholder="图标URL（可选）" autocomplete="off">
          <button type="button" id="quickAddFetch1" class="btn-secondary btn-sm" title="Google源">🔍1</button>
          <button type="button" id="quickAddFetch2" class="btn-secondary btn-sm" title="toolb.cn源">🔍2</button>
        </div>
        <div class="quick-add-logo-preview" id="quickAddLogoPreview"></div>
        <select id="quickAddCategory" class="quick-add-select">
          <option value="">选择分类...</option>
        </select>
        <div class="password-modal-btns">
          <button id="quickAddCancelBtn" class="btn-secondary">取消</button>
          <button id="quickAddConfirmBtn" class="btn-primary">添加</button>
        </div>
        <div id="quickAddError" class="password-error"></div>
      </div>
    </div>

    <!-- 顶栏：搜索引擎 -->
    <header class="header-simple">
      <div class="search-box-center glass-effect">
        <div class="search-engines">
          <button type="button" class="engine-btn active" data-engine="google" title="Google">
            <img src="https://www.google.com/favicon.ico" alt="Google">
          </button>
          <button type="button" class="engine-btn" data-engine="bing" title="Bing">
            <img src="https://www.bing.com/favicon.ico" alt="Bing">
          </button>
          <button type="button" class="engine-btn" data-engine="github" title="GitHub">
            <img src="https://github.githubassets.com/favicons/favicon.svg" alt="GitHub">
          </button>
        </div>
        <div class="search-input-wrapper">
          <input type="text" id="searchInput" class="search-input" placeholder=" " autocomplete="off">
          <label for="searchInput" class="search-label">搜索站点...</label>
          <div id="searchSuggestions" class="search-suggestions"></div>
        </div>
        <button id="searchBtn" class="search-btn">🔍</button>
      </div>
      <!-- 齿轮菜单 -->
      <div class="gear-menu-wrapper">
        <button id="gearMenuBtn" class="gear-btn" title="菜单">⚙️</button>
        <div id="gearMenu" class="gear-dropdown" style="display: none;">
          <button id="quickAddBtn" class="gear-menu-item">
            <span class="gear-menu-icon">➕</span>
            <span>快速添加</span>
          </button>
          <button id="editModeBtn" class="gear-menu-item">
            <span class="gear-menu-icon">🔐</span>
            <span>编辑排序</span>
          </button>
          <a href="/admin.html" class="gear-menu-item">
            <span class="gear-menu-icon">⚙️</span>
            <span>管理后台</span>
          </a>
        </div>
      </div>
    </header>

    <!-- 主布局 -->
    <div class="layout-wrapper">
      <!-- 左侧分类侧边栏 -->
      <aside class="sidebar">
        <div id="categoriesList" class="categories-sidebar">
          <!-- 动态加载分类 -->
        </div>
      </aside>

      <!-- 右侧内容区 -->
      <div class="content-wrapper">
        <main class="main-content">
          <div id="sitesGrid" class="sites-grid">
            <!-- 由 JavaScript 动态生成骨架屏和站点卡片 -->
          </div>

          <!-- 无限滚动触发器 -->
          <div id="loadMoreTrigger" class="load-more-trigger">
            <div class="loading-dots">
              <span></span><span></span><span></span>
            </div>
          </div>

          <div id="emptyState" class="empty-state" style="display: none;">
            <div class="empty-icon">📭</div>
            <h3>暂无站点</h3>
            <p>还没有添加任何站点</p>
            <a href="/admin.html" class="btn-primary">前往管理后台</a>
          </div>
        </main>
      </div>
    </div>

  </div>

  <footer
    style="position: fixed; bottom: 1rem; left: 50%; transform: translateX(-50%); font-size: 0.75rem; color: rgba(255,255,255,0.5);">
    <a href="https://github.com/debbide/nav-dashboard" target="_blank"
      style="color: rgba(255,255,255,0.6); text-decoration: none;">
      GitHub: debbide/nav-dashboard
    </a>
  </footer>

  <!-- IP Info Card -->
  <div id="ipCard" class="ip-card glass-effect" style="display: none;">
    <div class="ip-header">
      <span class="ip-greeting" id="ipGreeting">👋 欢迎光临</span>
      <button class="ip-close" onclick="closeIpCard()">×</button>
    </div>
    <div class="ip-stats">
      <span id="visitCount">第 1 次访问</span>
    </div>
    <div class="ip-content-compact">
      <div class="ip-info-row">
        <span class="ip-icon bounce">📍</span>
        <span id="ipLocation">加载中...</span>
      </div>
      <div class="ip-info-row">
        <span class="ip-icon pulse">🌐</span>
        <span id="ipAddress">...</span>
      </div>
    </div>
    <div class="ip-weather" id="ipWeather">
      <span class="weather-icon">🌤️</span>
      <span class="weather-temp" id="weatherTemp">--°C</span>
      <span class="weather-desc" id="weatherDesc">获取天气中...</span>
    </div>
  </div>

  <script src="/js/main.js?v=6"></script>
</body>

</html>